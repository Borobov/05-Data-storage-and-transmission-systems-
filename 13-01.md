# Домашнее задание к занятию «Уязвимости и атаки на информационные системы»

### Боробов И.С.
------

### Задание 1

Скачайте и установите виртуальную машину Metasploitable: https://sourceforge.net/projects/metasploitable/.

Это типовая ОС для экспериментов в области информационной безопасности, с которой следует начать при анализе уязвимостей.

Просканируйте эту виртуальную машину, используя **nmap**.

Попробуйте найти уязвимости, которым подвержена эта виртуальная машина.

Сами уязвимости можно поискать на сайте https://www.exploit-db.com/.

Для этого нужно в поиске ввести название сетевой службы, обнаруженной на атакуемой машине, и выбрать подходящие по версии уязвимости.

Ответьте на следующие вопросы:

- Какие сетевые службы в ней разрешены?
- Какие уязвимости были вами обнаружены? (список со ссылками: достаточно трёх уязвимостей)
  
*Приведите ответ в свободной форме.*  

### Ответ:
Для обнаружения доступных устройств в сети я выполнил:  
```
nmap -sn 192.168.31.0/24  
```
Обнаружил тестовую машину с Metasploitable: 
```
Nmap scan report for 192.168.31.140
Host is up (0.0037s latency).
MAC Address: 08:00:27:D2:9E:9C (Oracle VirtualBox virtual NIC)
```
Затем просканировал эту машину и получил список открытых портов:
```
root@nodeone:/home/borobov# nmap 192.168.31.140
Starting Nmap 7.80 ( https://nmap.org ) at 2023-08-15 00:20 EDT
Nmap scan report for 192.168.31.94
Host is up (0.0065s latency).
Not shown: 977 closed ports
PORT     STATE SERVICE
21/tcp   open  ftp
22/tcp   open  ssh
23/tcp   open  telnet
25/tcp   open  smtp
53/tcp   open  domain
80/tcp   open  http
111/tcp  open  rpcbind
139/tcp  open  netbios-ssn
445/tcp  open  microsoft-ds
512/tcp  open  exec
513/tcp  open  login
514/tcp  open  shell
1099/tcp open  rmiregistry
1524/tcp open  ingreslock
2049/tcp open  nfs
2121/tcp open  ccproxy-ftp
3306/tcp open  mysql
5432/tcp open  postgresql
5900/tcp open  vnc
6000/tcp open  X11
6667/tcp open  irc
8009/tcp open  ajp13
8180/tcp open  unknown
MAC Address: 08:00:27:D2:9E:9C (Oracle VirtualBox virtual NIC)

Nmap done: 1 IP address (1 host up) scanned in 0.42 seconds
```
80/tcp   open  http  
https://www.exploit-db.com/exploits/50383  

5432/tcp open  postgresql  
https://www.exploit-db.com/exploits/46813  

3306/tcp open  mysql  
https://www.exploit-db.com/exploits/1741  

### Задание 2

Проведите сканирование Metasploitable в режимах SYN, FIN, Xmas, UDP.

Запишите сеансы сканирования в Wireshark.

Ответьте на следующие вопросы:

- Чем отличаются эти режимы сканирования с точки зрения сетевого трафика?
- Как отвечает сервер?

*Приведите ответ в свободной форме.*

### Ответ:
```
nmap -sS 192.168.31.140  
```
SYN метод, основанный на принципах создания TCP-соединения и состоящий в последовательной передаче на объект сканирования TCP SYN-запросов на создание соединения на различные порты. Если порт открыт, то на данный сканирующий запрос будет получен ответ TCP SYN АСК; если же порт закрыт - ответом будет TCP [RST].  
![sS](https://github.com/Borobov/05-Data-storage-and-transmission-systems-/blob/75e9f287dbc2c25812f8a959393bece3f3556d9a/IMG-13-01/1-1.jpg)

```
nmap -sF 192.168.31.140  
```
FIN в основу данного метода легли некоторые тонкости реализации протокола TCP в различных сетевых ОС: на передаваемый TCP FIN-запрос закрытые порты отвечают пакетом с флагом RST, а открытые порты данное сообщение игнорируют. Однако сетевые ОС фирмы Microsoft таким методом просканировать не удастся, так как в их реализации протокола TCP передача пакета TCP RST в ответ на подобный запрос не предусмотрена.   
![sF](https://github.com/Borobov/05-Data-storage-and-transmission-systems-/blob/75e9f287dbc2c25812f8a959393bece3f3556d9a/IMG-13-01/1-2.jpg)

```
nmap -sX 192.168.31.140  
```
Xmas если в ответ приходит RST пакет, то порт считается закрытым, отсутствие ответа означает, что порт открыт|фильтруется. Порт помечается как фильтруется, если в ответ приходит ICMP ошибка о недостижимости (тип 3, код 1, 2, 3, 9, 10 или 13).
![Xmas](https://github.com/Borobov/05-Data-storage-and-transmission-systems-/blob/75e9f287dbc2c25812f8a959393bece3f3556d9a/IMG-13-01/1-3.jpg)

```
nmap -sU 192.168.31.140  
```
UDP сканирование работает путем посылки пустого (без данных) UDP заголовка на каждый целевой порт. Если в ответ приходит ICMP ошибка о недостижимости порта (тип 3, код 3), значит порт закрыт. Другие ICMP ошибки недостижимости (тип 3, коды 1, 2, 9, 10 или 13) указывают на то, что порт фильтруется. Иногда, служба будет отвечать UDP пакетом, указывая на то, что порт открыт. Если после нескольких попыток не было получено никакого ответа, то порт классифицируется как открыт|фильтруется. Это означает, что порт может быть открыт, или, возможно, пакетный фильтр блокирует его.
![sU](https://github.com/Borobov/05-Data-storage-and-transmission-systems-/blob/75e9f287dbc2c25812f8a959393bece3f3556d9a/IMG-13-01/1-4.jpg)
