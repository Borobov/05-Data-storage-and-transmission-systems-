# Домашнее задание к занятию «Базы данных, их типы»

### Боробов И.С.
---

### Задание 1. СУБД

### Кейс
Крупная строительная компания, которая также занимается проектированием и девелопментом, решила создать 
правильную архитектуру для работы с данными. Ниже представлены задачи, которые необходимо решить для
каждой предметной области. 

Какие типы СУБД, на ваш взгляд, лучше всего подойдут для решения этих задач и почему? 
 
1.1. Бюджетирование проектов с дальнейшим формированием финансовых аналитических отчётов и прогнозирования рисков.
СУБД должна гарантировать целостность и чёткую структуру данных.

1.1.* Хеширование стало занимать длительно время, какое API можно использовать для ускорения работы? 

1.2. Под каждый девелоперский проект создаётся отдельный лендинг, и все данные по лидам стекаются в CRM к 
маркетологам и менеджерам по продажам. Какой тип СУБД лучше использовать для лендингов и для CRM? 
СУБД должны быть гибкими и быстрыми.

1.2.* Можно ли эту задачу закрыть одной СУБД? И если да, то какой именно СУБД и какой реализацией?

1.3. Отдел контроля качества решил создать базу по корпоративным нормам и правилам, обучающему материалу 
и так далее, сформированную согласно структуре компании. СУБД должна иметь простую и понятную структуру.

1.3.* Можно ли под эту задачу использовать уже существующую СУБД из задач выше и если да, то как лучше это 
реализовать?

1.4. Департамент логистики нуждается в решении задач по быстрому формированию маршрутов доставки материалов 
по объектам и распределению курьеров по маршрутам с доставкой документов. СУБД должна уметь быстро работать
со связями.

1.4.* Можно ли к этой СУБД подключить отдел закупок или для них лучше сформировать свою СУБД в связке с СУБД 
логистов?

1.5.* Можно ли все перечисленные выше задачи решить, используя одну СУБД? Если да, то какую именно?

*Приведите ответ в свободной форме.*

### Ответ:
1.1. Реляционные СУБД - MySQL, Oracle DB, PostgreSQL. Реляционные базы данных применимы везде, где важнейшим приоритетом является целостность и безопасность данных и где встречаются высокоструктурированные данные, соответствующие строгой, предсказуемой и предопределенной схеме.  
1.1.* СУБД ключ-значение - Redis, Memcached. Базы данных «ключ — значение» часто используют гораздо меньше памяти для хранения одной и той же базы данных, что может привести к значительному увеличению производительности при определённых рабочих нагрузках. Данные СУДБ используются для кэширования данных.  
1.2. Для этих задач подойдет NoSQL - обладает следующими качествами: гибкость, масштабируемость, производительность, широкие функциональные возможности. Сайты под раздиные проекты могут иметь неструктурированные данные, как и данные передаваемые в единую CRM.  
1.2.* Можно использовать MongoDB - масштабируется горизонтально, используя технику сегментирования объектов баз данных — распределение их частей по различным узлам кластера. Может работать с набором реплик, то есть содержать две или более копии данных на различных узлах. Вспомогательные реплики поддерживают в актуальном состоянии копии данных.  
1.3. Для этих задач подойдет NoSQL - документоориентированные базы данных, так как у нас стоит задача организовать работу с различными документыми подчиняющихся какой-то иерархии/структуре. 
1.3.* Подойдет MongoDB, её мы использовали ранее. Можно создать разные экземпляпы БД под разные задачи на нашем сервере, которые не будут влиять друг на друга.  
1.4. Подойдет графовая БД - подходит для сценариев, в которых данные сильно связаны между собой и имеют четко определенные связи. Представление данных в виде графа предлагает удобные средства для обработки сложных связей. В зависимости от конкретной компании в этой иерархии может быть любое количество уровней. Но с увеличением количества уровней вычисление связей в реляционной базе данных становится все сложнее и сложнее.  
1.4.* В нашей графовой БД можно подключить отдел закупок, так как возможно цепочки поставок будет так же эффективно обрабатывать в выбранной БД.  
1.5. Все вышеперечисленные задачи можно решить используя реляционные СУБД, например PostgreSQL. На каких-то задачах она будет возможно медленее и потреблять больше вычеслительных ресуров, но так же могут быть и плюсы от использования единого типа СУБД, например одни ИТ специалисты смогут облуживать все существующие базы данных на предприятии, что возможно эконоимечки будет выгоднее, чем держать несколько видов СУБД + ИТ специалиста к каждой из них.  

---

### Задание 2. Транзакции

2.1. Пользователь пополняет баланс счёта телефона, распишите пошагово, какие действия должны произойти для того, чтобы 
транзакция завершилась успешно. Ориентируйтесь на шесть действий.

2.1.* Какие действия должны произойти, если пополнение счёта телефона происходило бы через автоплатёж?  


*Приведите ответ в свободной форме.*

### Ответ:
2.1  
1. абонент вводит сумму которую он хочет перевести (например 500 р.);  
2. банк проверяет доступность данной суммы на счете пользователя;  
3. банк резервирует данную сумму на счете пользователя;  
4. банк оуществляет перевод средств на счет оператора связи;  
5. банк получает подтверждение от оператора, что средства поступили не л/с абонента;  
6. происходит списание зарезервированной суммы со счета пользователя банком.  

2.1.*  
1. оператор связи автоматически отслеживает остаточный баланс на счете или приближение даты списания денежных средств (зависит от тарифа: фиксированный пакетный платеж или списание по факту окончания средств на счете абонента);
2. оператор отправляет запрос в банк на списание необходимой суммы (определенной по тарифу);
3. банк проверяет доступность данной суммы на счете пользователя;  
4. банк резервирует данную сумму на счете пользователя;  
5. банк оуществляет перевод средств на счет оператора связи;  
6. банк получает подтверждение от оператора, что средства поступили не л/с абонента;  
7. происходит списание зарезервированной суммы со счета пользователя банком.  

---

### Задание 3. SQL vs NoSQL

3.1. Напишите пять преимуществ SQL-систем по отношению к NoSQL. 

3.1.* Какие, на ваш взгляд, преимущества у NewSQL систем перед SQL и NoSQL.

*Приведите ответ в свободной форме.*

### Ответ:
3.1.  
1. Простота и доступность для понимания пользователем. Единственной используемой информационной конструкцией является "таблица";  
2. Возможность манипуляции данными без необходимости знаний физической организации базы данных;  
3. Полная независимость данных. Изменения в прикладной программе при изменении реляционной БД минимальны;  
4. Элементы данных связаны между собой и позволяют обеспечивать безопасное и надежное управление ими на основе правил целостности;
5. На сегодняшний день преимущества реляционного подхода сделали его самой распространенной моделью для баз данных в мире.

3.1.*  
NewSQL - класс современных реляционных СУБД, стремящихся совместить в себе преимущества NoSQL и транзакционные требования классических баз данных.  
* приложения взаимодействуют в основном посредством SQL;  
* транзакции полностью поддерживают требования ACID;  
* при управлении не применяется механизм блокировок – таким образом, исключается вероятность конфликта между записываемыми и считываемыми в реальном времени данными;  
* архитектура shared—nothing, при которой каждой узел системы отвечает за свой набор данных, являясь независимым и самодостаточным, подразумевает легкую и быструю масштабируемость;  
* производительность узла СУБД на NewSQL намного выше, чем у традиционных РСУБД;  
* скорость отклика системы в 50 раз превышает эту величину у традиционных РСУБД.  
---

### Задание 4. Кластеры

Необходимо производить большое количество вычислений при работе с огромным количеством данных, под эту задачу 
выделено 1000 машин. 

На основе какого критерия будете выбирать тип СУБД и какая модель *распределённых вычислений* 
здесь справится лучше всего и почему?

*Приведите ответ в свободной форме.*

### Ответ:
Основными критериями будет масшатрибуемость. Как пример реального проекта можно привести в пример Hadoop.
Hadoop — проект фонда Apache Software Foundation, свободно распространяемый набор утилит, библиотек и фреймворк для разработки и выполнения распределённых программ, работающих на кластерах из сотен и тысяч узлов. Используется для реализации поисковых и контекстных механизмов многих высоконагруженных веб-сайтов, в том числе, для Yahoo! и Facebook[3]. Разработан на Java в рамках вычислительной парадигмы MapReduce, согласно которой приложение разделяется на большое количество одинаковых элементарных заданий, выполнимых на узлах кластера и естественным образом сводимых в конечный результат. 
Одной из основных целей Hadoop изначально было обеспечение горизонтальной масштабируемости кластера посредством добавления недорогих узлов (оборудования массового класса, англ. commodity hardware), без прибегания к мощным серверам и дорогим сетям хранения данных. Функционирующие кластеры размером в тысячи узлов подтверждают осуществимость и экономическую эффективность таких систем, так, по состоянию на 2011 год известно о крупных кластерах Hadoop в Yahoo (более 4 тыс. узлов с суммарной ёмкостью хранения 15 Пбайт), Facebook (около 2 тыс. узлов на 21 Пбайт) и Ebay (700 узлов на 16 Пбайт).

---

Задания,помеченные звёздочкой, — дополнительные, то есть не обязательные к выполнению, и никак не повлияют на получение вами зачёта по этому домашнему заданию. Вы можете их выполнить, если хотите глубже разобраться в материале.
